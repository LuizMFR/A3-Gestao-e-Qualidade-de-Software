<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<StackPane xmlns="http://javafx.com/javafx/21"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="org.example.cliente.controllers.HomeController"
           stylesheets="@../css/styles.css"
           styleClass="app-bg"
           prefWidth="1200" prefHeight="720">

    <children>
        <!-- Janela com bordas arredondadas -->
        <BorderPane fx:id="root"
                    prefWidth="1120" prefHeight="660"
                    maxWidth="1120" maxHeight="660"
                    styleClass="app-card">

            <!-- APP BAR (TOPO) -->
            <top>
                <HBox spacing="12" styleClass="appbar" BorderPane.alignment="CENTER_LEFT">
                    <padding><Insets top="10" right="14" bottom="10" left="14"/></padding>
                    <children>
                        <!-- LOGO -->
                        <ImageView fitHeight="74" fitWidth="71" preserveRatio="true">
                           <image>
                              <Image url="@logo.png" />
                           </image>
                        </ImageView>

                        

                        <Pane HBox.hgrow="ALWAYS"/>

                        <!-- BUSCA -->
                        <TextField fx:id="txtBusca" promptText="Buscar transações..."
                                   styleClass="input-appbar" prefWidth="320"/>

                        <!-- BOTÕES DA APPBAR -->
                        <Button text="Notificações" onAction="#abrirNotificacoes" styleClass="btn-appbar"/>
                        <Button text="Sair" onAction="#sair" styleClass="btn-danger"/>
                    </children>
                </HBox>
            </top>

            <!-- MENU LATERAL -->
            <left>
                <VBox spacing="10" prefWidth="240" BorderPane.alignment="CENTER_LEFT">
                    <padding><Insets top="8" right="8" bottom="8" left="8"/></padding>
                    <children>
                        <VBox spacing="8" styleClass="menu-card">
                            <Label text="Navegação" styleClass="menu-section"/>
                            <Button text="Dashboard" onAction="#navDashboard" styleClass="btn-ghost"/>
                            <Button text="Transações" onAction="#navTransacoes" styleClass="btn-ghost"/>
                            <Button text="Categorias" onAction="#navCategorias" styleClass="btn-ghost"/>
                            <Button text="Relatórios" onAction="#navRelatorios" styleClass="btn-ghost"/>
                            <Button text="Configurações" onAction="#navConfiguracoes" styleClass="btn-ghost"/>
                        </VBox>

                        <Button text="+ Nova Transação" onAction="#novaTransacao" styleClass="btn-primary"/>
                    </children>
                </VBox>
            </left>

            <!-- CONTEÚDO CENTRAL -->
            <center>
                <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
                    <content>
                        <VBox spacing="16" prefWidth="800">
                            <padding><Insets top="12" right="8" bottom="16" left="8"/></padding>

                            <children>
                                <Label text="Visão Geral" styleClass="section-title"/>

                                <!-- CARDS -->
                                <HBox spacing="12">
                                    <children>
                                        <VBox spacing="6" styleClass="card" HBox.hgrow="ALWAYS">
                                            <Label text="Saldo Atual" styleClass="muted"/>
                                            <Label fx:id="lblSaldo" text="R$ 0,00" styleClass="kpi-default"/>
                                        </VBox>

                                        <VBox spacing="6" styleClass="card" HBox.hgrow="ALWAYS">
                                            <Label text="Receitas (mês)" styleClass="muted"/>
                                            <Label fx:id="lblReceitasMes" text="R$ 0,00" styleClass="kpi-green"/>
                                        </VBox>

                                        <VBox spacing="6" styleClass="card" HBox.hgrow="ALWAYS">
                                            <Label text="Gastos (mês)" styleClass="muted"/>
                                            <Label fx:id="lblGastosMes" text="R$ 0,00" styleClass="kpi-red"/>
                                        </VBox>
                                    </children>
                                </HBox>

                                <!-- TABELA -->
                                <VBox spacing="8" styleClass="card">
                                    <Label text="Transações Recentes" styleClass="card-title"/>
                                    <TableView fx:id="tblTransacoes" prefHeight="280">
                                        <columns>
                                            <TableColumn fx:id="colData" text="Data" prefWidth="120"/>
                                            <TableColumn fx:id="colDescricao" text="Descrição" prefWidth="260"/>
                                            <TableColumn fx:id="colCategoria" text="Categoria" prefWidth="160"/>
                                            <TableColumn fx:id="colTipo" text="Tipo" prefWidth="100"/>
                                            <TableColumn fx:id="colValor" text="Valor" prefWidth="140"/>
                                        </columns>
                                    </TableView>
                                    <HBox spacing="8" alignment="CENTER_RIGHT">
                                        <children>
                                            <Button text="+ Adicionar" onAction="#novaTransacao" styleClass="btn-primary"/>
                                            <Button text="Exportar" onAction="#exportarTransacoes" styleClass="btn-soft-dark"/>
                                        </children>
                                    </HBox>
                                </VBox>
                            </children>
                        </VBox>
                    </content>
                </ScrollPane>
            </center>

        </BorderPane>
    </children>
</StackPane>
